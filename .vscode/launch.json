{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true
        },
        {
            "name": "Prepare UniAD Data",
            "type": "python",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "tools/create_data.py",
            "console": "integratedTerminal",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "args": [
                "nuscenes",
                "--root-path",
                "./data/nuscenes/",
                "--out-dir",
                "./data/infos/",
                "--extra-tag",
                "nuscenes",
                "--version",
                "v1.0",
                "--canbus",
                "./data/nuscenes/"
            ],
        },
        {
            "name": "Create Anchors",
            "type": "python",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "tools/data_converter/create_anchor.py",
            "console": "integratedTerminal",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "args": [],
        },
//        {
//            // This is used to get the parameters needed for the Python Evaluation script
//            "name": "Bash: Evaluate Model",
//            "type": "bashdb",
//            "request": "launch",
//            "cwd": "${workspaceFolder}",
//            "program": "./tools/uniad_dist_eval.sh",
//            "args": [
//                "./projects/configs/stage1_track_map/base_track_map.py", "./ckpts/uniad_base_track_map.pth",
//                //"./projects/configs/stage2_e2e/base_e2e.py", "./ckpts/uniad_base_e2e.pth",
//                "1"
//            ]
//        },
        {
            "name": "Evaluate Model (base_track_map)",
            "type": "python",
            "module": "torch.distributed.run",
            "request": "launch",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "env": {"PYTHONPATH": "${workspaceFolder}/"},
            "args": [
                "--nproc_per_node",
                "1",
                "--master_port",
                "28596",
                "tools/test.py",
                "./projects/configs/stage1_track_map/base_track_map.py",
                "./ckpts/uniad_base_track_map.pth",
                "--launcher",
                "pytorch",
                "--eval",
                "bbox",
                "--show-dir",
                "./projects/work_dirs/stage1_track_map/base_track_map/"
            ],
        },
        {
            "name": "Evaluate Model (base_e2e)",
            "type": "python",
            "module": "torch.distributed.run",
            "request": "launch",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "env": {"PYTHONPATH": "${workspaceFolder}/"},
            "args": [
                "--nproc_per_node",
                "1",
                "--master_port",
                "28596",
                "tools/test.py",
                "./projects/configs/stage2_e2e/base_e2e.py",
                "./ckpts/uniad_base_e2e.pth",
                "--launcher",
                "pytorch",
                "--eval",
                "bbox",
                "--show-dir",
                "./projects/work_dirs/stage2_e2e/base_e2e/"
            ],
        },
//        {
//            // This is used to get the parameters needed for the Python Training script
//            "name": "Bash: Train Model",
//            "type": "bashdb",
//            "request": "launch",
//            "cwd": "${workspaceFolder}",
//            "program": "./tools/uniad_dist_train.sh",
//            "args": [
//                "./projects/configs/stage1_track_map/base_track_map.py",
//                "1"
//            ]
//        },
        {
            "name": "Train Model",
            "type": "python",
            "module": "torch.distributed.run",
            "request": "launch",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "env": {"PYTHONPATH": "${workspaceFolder}/"},
            "args": [
                "--nproc_per_node",
                "1",
                "--master_addr",
                "127.0.0.1",
                "--master_port",
                "28596",
                "--nnodes",
                "1",
                "--node_rank",
                "0",
                "tools/train.py",
                "./projects/configs/stage1_track_map/base_track_map.py",
                "--launcher",
                "pytorch",
                "--deterministic",
                "--work-dir",
                "./projects/work_dirs/stage1_track_map/base_track_map/"
            ],
        },
        {
            "name": "Visualize",
            "type": "python",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "tools/analysis_tools/visualize/run.py",
            "console": "integratedTerminal",
            "purpose": ["debug-in-terminal"],
            "justMyCode": true,
            "env": {"PYTHONPATH": "${workspaceFolder}/"},
            "args": [
                "--predroot",
                "output/results.pkl",
                "--out_folder",
                "output",
                "--demo_video",
                "results.avi",
                "--project_to_cam",
                "True",
            ],
        },
    ]
}
